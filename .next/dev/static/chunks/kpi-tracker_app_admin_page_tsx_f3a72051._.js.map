{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/coenie/kpi-tracker/app/admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { getAllProfiles, getAllTickets, createTicket, deleteTicket, uploadProfilePicture, Profile, Ticket } from '../lib/supabase';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\n\r\n// Hook to force re-render every minute for time tracking\r\nfunction useTimeUpdate() {\r\n  const [, setTick] = useState(0);\r\n  \r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setTick(t => t + 1);\r\n    }, 60000); // Update every minute\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n}\r\n\r\nexport default function AdminPage() {\r\n  const router = useRouter();\r\n  const { user, profile, loading, isAdmin, signOut } = useAuth();\r\n  \r\n  // Force re-render every minute to update time tracker\r\n  useTimeUpdate();\r\n  \r\n  const [profiles, setProfiles] = useState<Profile[]>([]);\r\n  const [tickets, setTickets] = useState<Ticket[]>([]);\r\n  const [loadingData, setLoadingData] = useState(true);\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [showStatsExport, setShowStatsExport] = useState(false);\r\n  const [selectedUserId, setSelectedUserId] = useState('');\r\n  const [filterUser, setFilterUser] = useState('all');\r\n  const [filterStatus, setFilterStatus] = useState<'all' | 'open' | 'closed'>('all');\r\n  \r\n  const [newTicketData, setNewTicketData] = useState({\r\n    issue: '',\r\n    location: 'remote' as 'on-site' | 'remote',\r\n    client: '',\r\n    clickupTicket: '',\r\n    ticketType: '' as 'Hardware' | 'Software' | '',\r\n    estateOrBuilding: '',\r\n    cmlLocation: ''\r\n  });\r\n\r\n  // Stats export state\r\n  const [dateFrom, setDateFrom] = useState('');\r\n  const [dateTo, setDateTo] = useState('');\r\n  const [exportUser, setExportUser] = useState('all');\r\n\r\n  // Profile picture upload state\r\n  const [uploadingFor, setUploadingFor] = useState<Profile | null>(null);\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  // User management state\r\n  const [showUserManagement, setShowUserManagement] = useState(false);\r\n\r\n  // Redirect if not admin\r\n  useEffect(() => {\r\n    if (!loading && (!user || !isAdmin)) {\r\n      router.push('/dashboard');\r\n    }\r\n  }, [user, loading, isAdmin, router]);\r\n\r\n  // Load data\r\n  useEffect(() => {\r\n    if (user && isAdmin) {\r\n      loadData();\r\n    }\r\n  }, [user, isAdmin]);\r\n\r\n  // Set default date range\r\n  useEffect(() => {\r\n    const today = new Date();\r\n    const thirtyDaysAgo = new Date(today);\r\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n    setDateTo(today.toISOString().split('T')[0]);\r\n    setDateFrom(thirtyDaysAgo.toISOString().split('T')[0]);\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    console.log('loadData: Starting...');\r\n    setLoadingData(true);\r\n    try {\r\n      console.log('loadData: Current user:', user?.id);\r\n      console.log('loadData: Current profile:', profile);\r\n      console.log('loadData: Is admin?', isAdmin);\r\n      \r\n      console.log('loadData: Fetching profiles...');\r\n      const profilesData = await getAllProfiles();\r\n      console.log('loadData: Profiles result:', profilesData);\r\n      \r\n      console.log('loadData: Fetching tickets...');\r\n      const ticketsData = await getAllTickets();\r\n      console.log('loadData: Tickets result:', ticketsData);\r\n      \r\n      setProfiles(profilesData);\r\n      setTickets(ticketsData);\r\n    } catch (err) {\r\n      console.error('loadData: Exception:', err);\r\n    }\r\n    setLoadingData(false);\r\n    console.log('loadData: Done');\r\n  };\r\n\r\n  const handleCreateTicket = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedUserId || !newTicketData.issue.trim() || !newTicketData.client.trim() || !newTicketData.ticketType || !newTicketData.estateOrBuilding.trim() || !newTicketData.cmlLocation.trim()) return;\r\n\r\n    const { data, error } = await createTicket({\r\n      user_id: selectedUserId,\r\n      client: newTicketData.client.trim(),\r\n      clickup_ticket: newTicketData.clickupTicket.trim() || undefined,\r\n      location: newTicketData.location,\r\n      issue: newTicketData.issue.trim(),\r\n      created_by: user?.id,\r\n      ticket_type: newTicketData.ticketType,\r\n      estate_or_building: newTicketData.estateOrBuilding.trim(),\r\n      cml_location: newTicketData.cmlLocation.trim()\r\n    });\r\n\r\n    if (!error && data) {\r\n      await loadData();\r\n      setNewTicketData({ issue: '', location: 'remote', client: '', clickupTicket: '', ticketType: '', estateOrBuilding: '', cmlLocation: '' });\r\n      setSelectedUserId('');\r\n      setShowCreateForm(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteTicket = async (ticketId: string) => {\r\n    if (!confirm('Are you sure you want to delete this ticket? This action cannot be undone.')) return;\r\n    \r\n    const { error } = await deleteTicket(ticketId);\r\n    if (!error) {\r\n      setTickets(tickets.filter(t => t.id !== ticketId));\r\n    }\r\n  };\r\n\r\n  const handleSignOut = async () => {\r\n    await signOut();\r\n    router.push('/login');\r\n  };\r\n\r\n  const handleProfilePictureUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (!uploadingFor || !e.target.files || e.target.files.length === 0) return;\r\n    \r\n    const file = e.target.files[0];\r\n    if (!file.type.startsWith('image/')) {\r\n      alert('Please select an image file');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    const { publicUrl, error } = await uploadProfilePicture(uploadingFor.id, file);\r\n    setUploading(false);\r\n\r\n    if (error) {\r\n      alert('Failed to upload image: ' + error.message);\r\n    } else {\r\n      await loadData();\r\n      setUploadingFor(null);\r\n    }\r\n  };\r\n\r\n  // Filter tickets\r\n  const filteredTickets = tickets.filter(ticket => {\r\n    if (filterUser !== 'all' && ticket.user_id !== filterUser) return false;\r\n    if (filterStatus !== 'all' && ticket.status !== filterStatus) return false;\r\n    return true;\r\n  });\r\n\r\n  // Stats\r\n  const totalOpen = tickets.filter(t => t.status === 'open').length;\r\n  const totalClosed = tickets.filter(t => t.status === 'closed').length;\r\n  const totalOnSite = tickets.filter(t => t.location === 'on-site').length;\r\n  const totalRemote = tickets.filter(t => t.location === 'remote').length;\r\n\r\n  // Export functions\r\n  const getFilteredTicketsForExport = () => {\r\n    let filtered = [...tickets];\r\n    \r\n    if (exportUser !== 'all') {\r\n      filtered = filtered.filter(t => t.user_id === exportUser);\r\n    }\r\n    \r\n    if (dateFrom) {\r\n      filtered = filtered.filter(t => new Date(t.created_at) >= new Date(dateFrom));\r\n    }\r\n    \r\n    if (dateTo) {\r\n      const toDate = new Date(dateTo);\r\n      toDate.setHours(23, 59, 59, 999);\r\n      filtered = filtered.filter(t => new Date(t.created_at) <= toDate);\r\n    }\r\n    \r\n    return filtered;\r\n  };\r\n\r\n  const exportToCSV = () => {\r\n    const exportTickets = getFilteredTicketsForExport();\r\n    \r\n    const headers = [\r\n      'Ticket Number',\r\n      'Team Member',\r\n      'Client Name',\r\n      'Type (Hardware/Software)',\r\n      'Estate or Building',\r\n      'Location (as per CML)',\r\n      'Work Type (On-Site/Remote)',\r\n      'ClickUp Ticket Reference',\r\n      'Ticket Status',\r\n      'Issue Description',\r\n      'Resolution Description',\r\n      'Has Dependencies (Yes/No)',\r\n      'Dependency Company/Department',\r\n      'Ticket Updates',\r\n      'Total Time Tracked (Minutes)',\r\n      'Time Log Details',\r\n      'Response Time (Minutes)',\r\n      'Date Created',\r\n      'Date Closed'\r\n    ];\r\n    \r\n    const rows = exportTickets.map(t => {\r\n      const memberProfile = profiles.find(p => p.id === t.user_id);\r\n      \r\n      // Format updates as a single string with timestamps\r\n      const updatesFormatted = t.updates && t.updates.length > 0\r\n        ? t.updates.map((u: { text: string; timestamp: string }) => \r\n            `[${new Date(u.timestamp).toLocaleString('en-ZA')}] ${u.text}`\r\n          ).join(' | ')\r\n        : '';\r\n      \r\n      // Format time logs as a single string\r\n      const timeLogsFormatted = t.time_logs && t.time_logs.length > 0\r\n        ? t.time_logs.map((log: { minutes: number; description: string; timestamp: string; logged_by?: string }) => \r\n            `[${new Date(log.timestamp).toLocaleString('en-ZA')}] ${log.minutes}min - ${log.description}${log.logged_by ? ` (${log.logged_by})` : ''}`\r\n          ).join(' | ')\r\n        : '';\r\n      \r\n      return [\r\n        t.ticket_number || '',\r\n        memberProfile?.full_name || 'Unknown',\r\n        t.client || '',\r\n        t.ticket_type || '',\r\n        t.estate_or_building || '',\r\n        t.cml_location || '',\r\n        t.location === 'on-site' ? 'On-Site' : t.location === 'remote' ? 'Remote' : '',\r\n        t.clickup_ticket || '',\r\n        t.status === 'open' ? 'Open' : t.status === 'closed' ? 'Closed' : '',\r\n        `\"${(t.issue || '').replace(/\"/g, '\"\"')}\"`,\r\n        `\"${(t.resolution || '').replace(/\"/g, '\"\"')}\"`,\r\n        t.has_dependencies ? 'Yes' : 'No',\r\n        t.dependency_name || '',\r\n        `\"${updatesFormatted.replace(/\"/g, '\"\"')}\"`,\r\n        t.total_time_minutes || '',\r\n        `\"${timeLogsFormatted.replace(/\"/g, '\"\"')}\"`,\r\n        t.response_time_minutes || '',\r\n        new Date(t.created_at).toLocaleString('en-ZA'),\r\n        t.closed_at ? new Date(t.closed_at).toLocaleString('en-ZA') : ''\r\n      ];\r\n    });\r\n    \r\n    const csv = [headers.join(','), ...rows.map(r => r.join(','))].join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = `kpi-report-${dateFrom}-to-${dateTo}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  const getExportStats = () => {\r\n    const exportTickets = getFilteredTicketsForExport();\r\n    const closed = exportTickets.filter(t => t.status === 'closed');\r\n    const withResponseTime = closed.filter(t => t.response_time_minutes && t.response_time_minutes > 0);\r\n    const avgResponseTime = withResponseTime.length > 0\r\n      ? withResponseTime.reduce((sum, t) => sum + (t.response_time_minutes || 0), 0) / withResponseTime.length\r\n      : 0;\r\n    \r\n    return {\r\n      total: exportTickets.length,\r\n      closed: closed.length,\r\n      open: exportTickets.filter(t => t.status === 'open').length,\r\n      closedRate: exportTickets.length > 0 ? ((closed.length / exportTickets.length) * 100).toFixed(1) : '0',\r\n      avgResponseTime: avgResponseTime.toFixed(0)\r\n    };\r\n  };\r\n\r\n  const getAvatarGradient = (name: string) => {\r\n    const colors = ['from-cyan-400 to-blue-500', 'from-violet-400 to-purple-500', 'from-rose-400 to-pink-500', 'from-amber-400 to-orange-500', 'from-emerald-400 to-teal-500'];\r\n    return colors[name.charCodeAt(0) % colors.length];\r\n  };\r\n\r\n  // Debug info - expanded\r\n  console.log('Admin Page Debug:', JSON.stringify({ loading, loadingData, hasUser: !!user, hasProfile: !!profile, isAdmin }, null, 2));\r\n\r\n  // Show debug panel instead of blocking\r\n  const debugInfo = (\r\n    <div className=\"fixed bottom-4 right-4 p-4 bg-slate-800 border border-slate-600 rounded-xl text-xs font-mono z-50\">\r\n      <p className=\"text-slate-400\">Debug Info:</p>\r\n      <p className={loading ? 'text-amber-400' : 'text-emerald-400'}>loading: {String(loading)}</p>\r\n      <p className={!user ? 'text-amber-400' : 'text-emerald-400'}>user: {user ? 'yes' : 'no'}</p>\r\n      <p className={!profile ? 'text-amber-400' : 'text-emerald-400'}>profile: {profile ? 'yes' : 'no'}</p>\r\n      <p className={!isAdmin ? 'text-amber-400' : 'text-emerald-400'}>isAdmin: {String(isAdmin)}</p>\r\n      <p className={loadingData ? 'text-amber-400' : 'text-emerald-400'}>loadingData: {String(loadingData)}</p>\r\n    </div>\r\n  );\r\n\r\n  if (loading && !user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-950 flex items-center justify-center flex-col gap-4\">\r\n        <div className=\"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin\" />\r\n        <p className=\"text-slate-400\">Checking authentication...</p>\r\n        {debugInfo}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-950 flex items-center justify-center flex-col gap-4\">\r\n        <p className=\"text-slate-400\">No user found.</p>\r\n        <Link href=\"/login\" className=\"text-cyan-400\">Go to Login</Link>\r\n        {debugInfo}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loadingData) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-950 flex items-center justify-center flex-col gap-4\">\r\n        <div className=\"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin\" />\r\n        <p className=\"text-slate-400\">Loading tickets and team data...</p>\r\n        {debugInfo}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-950 bg-grid-pattern bg-radial-gradient\">\r\n      {/* Header */}\r\n      <header className=\"sticky top-0 z-40 glass border-b border-slate-700/50\">\r\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <Link href=\"/dashboard\" className=\"w-10 h-10 rounded-xl bg-slate-800 border border-slate-700 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 transition-colors\">\r\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                </svg>\r\n              </Link>\r\n              \r\n              <div className=\"relative group\">\r\n                {profile?.avatar_url ? (\r\n                  <Image src={profile.avatar_url} alt={profile.full_name} width={48} height={48} className=\"w-12 h-12 rounded-xl object-cover shadow-lg\" />\r\n                ) : (\r\n                  <div className={`w-12 h-12 rounded-xl bg-gradient-to-br from-rose-500 to-orange-600 flex items-center justify-center text-white font-bold shadow-lg`}>\r\n                    {profile?.avatar || 'A'}\r\n                  </div>\r\n                )}\r\n                {profile && (\r\n                  <button \r\n                    onClick={() => setUploadingFor(profile)}\r\n                    className=\"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-cyan-500 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-cyan-400\"\r\n                    title=\"Upload profile picture\"\r\n                  >\r\n                    <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                    </svg>\r\n                  </button>\r\n                )}\r\n              </div>\r\n              \r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-white\">{profile?.full_name || 'Admin'}</h1>\r\n                <p className=\"text-sm text-slate-400\">{profile?.role || 'Administrator'} ‚Ä¢ Admin</p>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-3\">\r\n              <button onClick={() => setShowUserManagement(true)} className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-violet-500/20 border border-violet-500/30 text-violet-400 hover:bg-violet-500/30 transition-all\">\r\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n                </svg>\r\n                Manage Users\r\n              </button>\r\n              <button onClick={() => setShowStatsExport(true)} className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-500/20 border border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/30 transition-all\">\r\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                </svg>\r\n                Export Stats\r\n              </button>\r\n              <button onClick={() => setShowCreateForm(true)} className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg hover:shadow-cyan-500/25 transition-all\">\r\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n                </svg>\r\n                Create Ticket\r\n              </button>\r\n              <button onClick={handleSignOut} className=\"px-4 py-2 rounded-xl bg-slate-800 border border-slate-700 text-slate-400 hover:text-white transition-colors\">\r\n                Sign Out\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"max-w-7xl mx-auto px-6 py-8\">\r\n        {/* Stats */}\r\n        <section className=\"mb-8 grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          <div className=\"p-5 rounded-2xl bg-slate-800/50 border border-slate-700/50\">\r\n            <p className=\"text-xs text-slate-500 mb-1\">Total Tickets</p>\r\n            <p className=\"text-3xl font-bold text-white\">{tickets.length}</p>\r\n          </div>\r\n          <div className=\"p-5 rounded-2xl bg-amber-500/10 border border-amber-500/30\">\r\n            <p className=\"text-xs text-amber-400 mb-1\">Open</p>\r\n            <p className=\"text-3xl font-bold text-amber-400\">{totalOpen}</p>\r\n          </div>\r\n          <div className=\"p-5 rounded-2xl bg-emerald-500/10 border border-emerald-500/30\">\r\n            <p className=\"text-xs text-emerald-400 mb-1\">Closed</p>\r\n            <p className=\"text-3xl font-bold text-emerald-400\">{totalClosed}</p>\r\n          </div>\r\n          <div className=\"p-5 rounded-2xl bg-slate-800/50 border border-slate-700/50\">\r\n            <p className=\"text-xs text-slate-500 mb-1\">Team Members</p>\r\n            <p className=\"text-3xl font-bold text-white\">{profiles.length}</p>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Team Members */}\r\n        <section className=\"mb-8\">\r\n          <h2 className=\"text-lg font-semibold text-white mb-4\">Team Members</h2>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\r\n            {profiles.map(p => {\r\n              const memberTickets = tickets.filter(t => t.user_id === p.id);\r\n              const openCount = memberTickets.filter(t => t.status === 'open').length;\r\n              const closedCount = memberTickets.filter(t => t.status === 'closed').length;\r\n              return (\r\n                <div key={p.id} className=\"p-4 rounded-xl bg-slate-800/40 border border-slate-700/50 group\">\r\n                  <div className=\"flex items-center gap-3 mb-3\">\r\n                    <div className=\"relative\">\r\n                      {p.avatar_url ? (\r\n                        <Image src={p.avatar_url} alt={p.full_name} width={40} height={40} className=\"w-10 h-10 rounded-lg object-cover\" />\r\n                      ) : (\r\n                        <div className={`w-10 h-10 rounded-lg bg-gradient-to-br ${getAvatarGradient(p.full_name)} flex items-center justify-center text-white font-bold text-sm`}>\r\n                          {p.avatar}\r\n                        </div>\r\n                      )}\r\n                      <button \r\n                        onClick={() => setUploadingFor(p)}\r\n                        className=\"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-cyan-500 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-cyan-400\"\r\n                        title=\"Upload profile picture\"\r\n                      >\r\n                        <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"text-sm font-medium text-white truncate\">{p.full_name.split(' ')[0]}</p>\r\n                      <p className=\"text-xs text-slate-500 truncate\">{p.role}</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 text-xs\">\r\n                    <span className=\"text-amber-400\">{openCount} open</span>\r\n                    <span className=\"text-slate-600\">‚Ä¢</span>\r\n                    <span className=\"text-emerald-400\">{closedCount} closed</span>\r\n                  </div>\r\n                  {p.is_admin && <span className=\"mt-2 inline-block px-2 py-0.5 rounded text-xs bg-rose-500/20 text-rose-400\">Admin</span>}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n\r\n        {/* Filters */}\r\n        <section className=\"mb-6 flex flex-wrap items-center gap-4\">\r\n          <div>\r\n            <label className=\"block text-xs text-slate-500 mb-1\">Filter by Member</label>\r\n            <select value={filterUser} onChange={(e) => setFilterUser(e.target.value)} className=\"px-4 py-2 rounded-xl bg-slate-800 border border-slate-700 text-white text-sm\">\r\n              <option value=\"all\">All Members</option>\r\n              {profiles.map(p => <option key={p.id} value={p.id}>{p.full_name}</option>)}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-xs text-slate-500 mb-1\">Filter by Status</label>\r\n            <select value={filterStatus} onChange={(e) => setFilterStatus(e.target.value as 'all' | 'open' | 'closed')} className=\"px-4 py-2 rounded-xl bg-slate-800 border border-slate-700 text-white text-sm\">\r\n              <option value=\"all\">All Status</option>\r\n              <option value=\"open\">Open Only</option>\r\n              <option value=\"closed\">Closed Only</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"ml-auto text-sm text-slate-400\">\r\n            Showing {filteredTickets.length} of {tickets.length} tickets\r\n          </div>\r\n        </section>\r\n\r\n        {/* Tickets List */}\r\n        <section>\r\n          <h2 className=\"text-lg font-semibold text-white mb-4\">All Tickets</h2>\r\n          {filteredTickets.length === 0 ? (\r\n            <div className=\"text-center py-12 rounded-2xl bg-slate-800/30 border border-slate-700/30\">\r\n              <p className=\"text-slate-500\">No tickets found.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {filteredTickets.map(ticket => {\r\n                const memberProfile = profiles.find(p => p.id === ticket.user_id);\r\n                return (\r\n                  <div key={ticket.id} className={`p-4 rounded-xl border ${ticket.status === 'open' ? 'bg-slate-800/40 border-amber-500/30' : 'bg-slate-800/30 border-slate-700/50'}`}>\r\n                    <div className=\"flex items-start gap-4\">\r\n                      {memberProfile?.avatar_url ? (\r\n                        <Image src={memberProfile.avatar_url} alt={memberProfile.full_name} width={40} height={40} className=\"w-10 h-10 rounded-lg object-cover\" />\r\n                      ) : (\r\n                        <div className={`w-10 h-10 rounded-lg bg-gradient-to-br ${getAvatarGradient(memberProfile?.full_name || 'U')} flex items-center justify-center text-white font-bold text-sm`}>\r\n                          {memberProfile?.avatar || 'U'}\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center flex-wrap gap-2 mb-2\">\r\n                          <span className={`px-2 py-0.5 rounded text-xs font-bold font-mono ${ticket.status === 'open' ? 'bg-amber-500/20 text-amber-400' : 'bg-slate-700 text-slate-300'}`}>\r\n                            {ticket.ticket_number}\r\n                          </span>\r\n                          <span className=\"text-xs text-slate-500\">{memberProfile?.full_name}</span>\r\n                          {ticket.client && <span className=\"px-2 py-0.5 rounded text-xs bg-slate-700 text-slate-300\">{ticket.client}</span>}\r\n                          {ticket.clickup_ticket && <span className=\"px-2 py-0.5 rounded text-xs bg-purple-500/20 text-purple-400\">üîó {ticket.clickup_ticket}</span>}\r\n                          <span className={`px-2 py-0.5 rounded text-xs ${ticket.location === 'on-site' ? 'bg-cyan-500/20 text-cyan-400' : 'bg-violet-500/20 text-violet-400'}`}>\r\n                            {ticket.location === 'on-site' ? 'üìç On-Site' : 'üåê Remote'}\r\n                          </span>\r\n                          <span className={`px-2 py-0.5 rounded-full text-xs ${ticket.status === 'open' ? 'bg-amber-500/20 text-amber-400' : 'bg-emerald-500/20 text-emerald-400'}`}>\r\n                            {ticket.status === 'open' ? 'Open' : 'Closed'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <p className=\"text-sm text-slate-300 mb-2\">{ticket.issue}</p>\r\n\r\n                        {/* Show ticket details */}\r\n                        <div className=\"flex flex-wrap gap-2 mb-2 text-xs\">\r\n                          {ticket.ticket_type && (\r\n                            <span className=\"px-2 py-0.5 rounded bg-slate-700 text-slate-300\">{ticket.ticket_type}</span>\r\n                          )}\r\n                          {ticket.estate_or_building && (\r\n                            <span className=\"px-2 py-0.5 rounded bg-slate-700 text-slate-300\">{ticket.estate_or_building}</span>\r\n                          )}\r\n                          {ticket.cml_location && (\r\n                            <span className=\"px-2 py-0.5 rounded bg-slate-700 text-slate-300\">üìç {ticket.cml_location}</span>\r\n                          )}\r\n                          {ticket.has_dependencies && (\r\n                            <span className=\"px-2 py-0.5 rounded bg-rose-500/20 text-rose-400\">‚ö†Ô∏è {ticket.dependency_name}</span>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Show Updates */}\r\n                        {ticket.updates && ticket.updates.length > 0 && (\r\n                          <div className=\"mt-2 p-2 rounded-lg bg-blue-500/10 border border-blue-500/20\">\r\n                            <p className=\"text-xs text-blue-400 mb-2\">Updates ({ticket.updates.length}):</p>\r\n                            <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n                              {ticket.updates.map((update: { text: string; timestamp: string }, idx: number) => (\r\n                                <div key={idx} className=\"text-xs\">\r\n                                  <span className=\"text-blue-300\">[{new Date(update.timestamp).toLocaleDateString('en-ZA', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}]</span>\r\n                                  <span className=\"text-slate-300 ml-1\">{update.text}</span>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Show Auto Time Tracked */}\r\n                        {(ticket.total_time_minutes || (ticket.time_logs && ticket.time_logs.length > 0)) && (\r\n                          <div className=\"mt-2 p-2 rounded-lg bg-violet-500/10 border border-violet-500/20\">\r\n                            <div className=\"flex items-center justify-between mb-1\">\r\n                              <p className=\"text-xs text-violet-400\">‚è±Ô∏è Auto Time Tracked</p>\r\n                              <span className=\"text-xs font-bold text-violet-300\">\r\n                                {(() => {\r\n                                  // Calculate total time including current elapsed time\r\n                                  const loggedTime = ticket.total_time_minutes || 0;\r\n                                  const lastUpdateTime = ticket.updates && ticket.updates.length > 0 \r\n                                    ? new Date(ticket.updates[ticket.updates.length - 1].timestamp).getTime()\r\n                                    : new Date(ticket.created_at).getTime();\r\n                                  const currentElapsed = ticket.status === 'open' \r\n                                    ? Math.round((new Date().getTime() - lastUpdateTime) / (1000 * 60))\r\n                                    : 0;\r\n                                  const totalMinutes = loggedTime + currentElapsed;\r\n                                  return `${Math.floor(totalMinutes / 60)}h ${totalMinutes % 60}m`;\r\n                                })()}\r\n                              </span>\r\n                            </div>\r\n                            {ticket.time_logs && ticket.time_logs.length > 0 && (\r\n                              <div className=\"space-y-1 max-h-20 overflow-y-auto\">\r\n                                {ticket.time_logs.map((log: { minutes: number; description: string; timestamp: string; logged_by?: string }, idx: number) => {\r\n                                  // For the initial \"Ticket opened\" log with 0 minutes, show actual elapsed time\r\n                                  const isInitialLog = log.description === 'Ticket opened' && log.minutes === 0 && idx === 0;\r\n                                  const displayMinutes = isInitialLog && ticket.status === 'open'\r\n                                    ? Math.round((new Date().getTime() - new Date(ticket.created_at).getTime()) / (1000 * 60))\r\n                                    : log.minutes;\r\n                                  \r\n                                  return (\r\n                                    <div key={idx} className=\"text-xs\">\r\n                                      <span className=\"text-violet-300 font-medium\">\r\n                                        {displayMinutes > 0 ? `${displayMinutes}m` : '0m'}\r\n                                        {isInitialLog && ticket.status === 'open' && (\r\n                                          <span className=\"text-violet-400/70 ml-1 text-xs\">(live)</span>\r\n                                        )}\r\n                                      </span>\r\n                                      <span className=\"text-slate-400 mx-1\">-</span>\r\n                                      <span className=\"text-slate-300\">{log.description}</span>\r\n                                      {log.logged_by && log.logged_by !== 'System' && <span className=\"text-slate-500 ml-1\">(by {log.logged_by})</span>}\r\n                                      <span className=\"text-slate-500 ml-1 text-xs\">\r\n                                        - {new Date(log.timestamp).toLocaleDateString('en-ZA', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}\r\n                                      </span>\r\n                                    </div>\r\n                                  );\r\n                                })}\r\n                                {/* Show additional current elapsed time if there are updates */}\r\n                                {ticket.status === 'open' && ticket.updates && ticket.updates.length > 0 && (() => {\r\n                                  const lastUpdateTime = new Date(ticket.updates[ticket.updates.length - 1].timestamp).getTime();\r\n                                  const currentElapsed = Math.round((new Date().getTime() - lastUpdateTime) / (1000 * 60));\r\n                                  return currentElapsed > 0 ? (\r\n                                    <div className=\"text-xs pt-1 border-t border-violet-500/20 mt-1\">\r\n                                      <span className=\"text-violet-300 font-medium\">{currentElapsed}m</span>\r\n                                      <span className=\"text-slate-400 mx-1\">-</span>\r\n                                      <span className=\"text-slate-300 italic\">Currently tracking since last update</span>\r\n                                    </div>\r\n                                  ) : null;\r\n                                })()}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {ticket.status === 'closed' && ticket.resolution && (\r\n                          <div className=\"p-2 rounded-lg bg-emerald-500/10 border border-emerald-500/20 mt-2\">\r\n                            <p className=\"text-xs text-emerald-400 mb-1\">Resolution:</p>\r\n                            <p className=\"text-sm text-slate-300\">{ticket.resolution}</p>\r\n                          </div>\r\n                        )}\r\n                        \r\n                        <p className=\"text-xs text-slate-600 mt-2\">\r\n                          Created: {new Date(ticket.created_at).toLocaleDateString('en-ZA', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}\r\n                          {ticket.closed_at && <> ‚Ä¢ Closed: {new Date(ticket.closed_at).toLocaleDateString('en-ZA', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}</>}\r\n                          {ticket.response_time_minutes && ticket.response_time_minutes > 0 && <> ‚Ä¢ Response: {ticket.response_time_minutes} min</>}\r\n                        </p>\r\n                      </div>\r\n\r\n                      {/* Delete Button */}\r\n                      <button\r\n                        onClick={() => handleDeleteTicket(ticket.id)}\r\n                        className=\"shrink-0 p-2 rounded-lg bg-rose-500/10 text-rose-400 hover:bg-rose-500/20 transition-colors\"\r\n                        title=\"Delete ticket\"\r\n                      >\r\n                        <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </section>\r\n      </main>\r\n\r\n      {/* Create Ticket Modal */}\r\n      {showCreateForm && (\r\n        <div className=\"fixed inset-0 z-50 overflow-hidden\">\r\n          <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" onClick={() => setShowCreateForm(false)} />\r\n          <div className=\"absolute inset-0 flex items-center justify-center p-6\">\r\n            <div className=\"w-full max-w-lg bg-slate-900 rounded-2xl border border-slate-700/50 shadow-2xl max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"p-6 border-b border-slate-700/50 sticky top-0 bg-slate-900\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h2 className=\"text-xl font-bold text-white\">Create Ticket</h2>\r\n                  <button onClick={() => setShowCreateForm(false)} className=\"w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:text-white\">\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <form onSubmit={handleCreateTicket} className=\"p-6 space-y-5\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">Assign to <span className=\"text-rose-400\">*</span></label>\r\n                  <select value={selectedUserId} onChange={(e) => setSelectedUserId(e.target.value)} required className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white\">\r\n                    <option value=\"\">Select a team member...</option>\r\n                    {profiles.map(p => <option key={p.id} value={p.id}>{p.full_name} ({p.role})</option>)}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">Client <span className=\"text-rose-400\">*</span></label>\r\n                  <select\r\n                    value={newTicketData.client}\r\n                    onChange={(e) => setNewTicketData({ ...newTicketData, client: e.target.value })}\r\n                    required\r\n                    className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white appearance-none cursor-pointer\"\r\n                  >\r\n                    <option value=\"\">Select a client...</option>\r\n                    <option value=\"Redefine\">Redefine</option>\r\n                    <option value=\"Balwin\">Balwin</option>\r\n                    <option value=\"Go Waterfall\">Go Waterfall</option>\r\n                    <option value=\"Go City\">Go City</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">Type <span className=\"text-rose-400\">*</span></label>\r\n                  <select\r\n                    value={newTicketData.ticketType}\r\n                    onChange={(e) => setNewTicketData({ ...newTicketData, ticketType: e.target.value as 'Hardware' | 'Software' | '' })}\r\n                    required\r\n                    className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white appearance-none cursor-pointer\"\r\n                  >\r\n                    <option value=\"\">Select type...</option>\r\n                    <option value=\"Hardware\">Hardware</option>\r\n                    <option value=\"Software\">Software</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">Estate or Building <span className=\"text-rose-400\">*</span></label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newTicketData.estateOrBuilding}\r\n                    onChange={(e) => setNewTicketData({ ...newTicketData, estateOrBuilding: e.target.value })}\r\n                    required\r\n                    className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white\"\r\n                    placeholder=\"Enter estate or building name...\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-1\">Location <span className=\"text-rose-400\">*</span></label>\r\n                  <p className=\"text-xs text-slate-500 mb-2\">as per CML</p>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newTicketData.cmlLocation}\r\n                    onChange={(e) => setNewTicketData({ ...newTicketData, cmlLocation: e.target.value })}\r\n                    required\r\n                    className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white\"\r\n                    placeholder=\"Enter location...\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">ClickUp Ticket <span className=\"text-slate-500\">(optional)</span></label>\r\n                  <input type=\"text\" value={newTicketData.clickupTicket} onChange={(e) => setNewTicketData({ ...newTicketData, clickupTicket: e.target.value })} className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white\" placeholder=\"Enter ClickUp ticket ID...\" />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">Location</label>\r\n                  <div className=\"flex gap-3\">\r\n                    <button type=\"button\" onClick={() => setNewTicketData({ ...newTicketData, location: 'on-site' })} className={`flex-1 px-4 py-3 rounded-xl border ${newTicketData.location === 'on-site' ? 'bg-cyan-500/20 border-cyan-500 text-cyan-400' : 'bg-slate-800 border-slate-700 text-slate-400'}`}>üìç On-Site</button>\r\n                    <button type=\"button\" onClick={() => setNewTicketData({ ...newTicketData, location: 'remote' })} className={`flex-1 px-4 py-3 rounded-xl border ${newTicketData.location === 'remote' ? 'bg-violet-500/20 border-violet-500 text-violet-400' : 'bg-slate-800 border-slate-700 text-slate-400'}`}>üåê Remote</button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">Issue Description <span className=\"text-rose-400\">*</span></label>\r\n                  <textarea value={newTicketData.issue} onChange={(e) => setNewTicketData({ ...newTicketData, issue: e.target.value })} rows={4} required className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white resize-none\" placeholder=\"Describe the issue...\" />\r\n                </div>\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <button type=\"submit\" disabled={!selectedUserId || !newTicketData.issue.trim() || !newTicketData.client.trim() || !newTicketData.ticketType || !newTicketData.estateOrBuilding.trim() || !newTicketData.cmlLocation.trim()} className=\"flex-1 px-5 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-medium disabled:opacity-50\">Create Ticket</button>\r\n                  <button type=\"button\" onClick={() => setShowCreateForm(false)} className=\"px-5 py-3 rounded-xl bg-slate-700 text-slate-300\">Cancel</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Stats Export Modal */}\r\n      {showStatsExport && (\r\n        <div className=\"fixed inset-0 z-50 overflow-hidden\">\r\n          <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" onClick={() => setShowStatsExport(false)} />\r\n          <div className=\"absolute inset-0 flex items-center justify-center p-6\">\r\n            <div className=\"w-full max-w-2xl bg-slate-900 rounded-2xl border border-slate-700/50 shadow-2xl\">\r\n              <div className=\"p-6 border-b border-slate-700/50\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h2 className=\"text-xl font-bold text-white\">Export Statistics</h2>\r\n                  <button onClick={() => setShowStatsExport(false)} className=\"w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:text-white\">\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6 space-y-6\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm text-slate-300 mb-2\">From Date</label>\r\n                    <input type=\"date\" value={dateFrom} onChange={(e) => setDateFrom(e.target.value)} className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm text-slate-300 mb-2\">To Date</label>\r\n                    <input type=\"date\" value={dateTo} onChange={(e) => setDateTo(e.target.value)} className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white\" />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm text-slate-300 mb-2\">Team Member</label>\r\n                  <select value={exportUser} onChange={(e) => setExportUser(e.target.value)} className=\"w-full px-4 py-3 rounded-xl bg-slate-800 border border-slate-700 text-white\">\r\n                    <option value=\"all\">All Members (Global Report)</option>\r\n                    {profiles.map(p => <option key={p.id} value={p.id}>{p.full_name}</option>)}\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"p-4 rounded-xl bg-slate-800/50 border border-slate-700/50\">\r\n                  <h3 className=\"text-sm font-semibold text-slate-300 mb-3\">Preview</h3>\r\n                  {(() => {\r\n                    const stats = getExportStats();\r\n                    return (\r\n                      <div className=\"grid grid-cols-4 gap-4 text-center\">\r\n                        <div><p className=\"text-2xl font-bold text-white\">{stats.total}</p><p className=\"text-xs text-slate-500\">Total</p></div>\r\n                        <div><p className=\"text-2xl font-bold text-emerald-400\">{stats.closed}</p><p className=\"text-xs text-slate-500\">Closed ({stats.closedRate}%)</p></div>\r\n                        <div><p className=\"text-2xl font-bold text-amber-400\">{stats.open}</p><p className=\"text-xs text-slate-500\">Open</p></div>\r\n                        <div><p className=\"text-2xl font-bold text-cyan-400\">{stats.avgResponseTime}</p><p className=\"text-xs text-slate-500\">Avg Response (min)</p></div>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n                </div>\r\n\r\n                <button onClick={exportToCSV} className=\"w-full px-5 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-medium flex items-center justify-center gap-2\">\r\n                  <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" /></svg>\r\n                  Download CSV Report\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Profile Picture Upload Modal */}\r\n      {uploadingFor && (\r\n        <div className=\"fixed inset-0 z-50 overflow-hidden\">\r\n          <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" onClick={() => !uploading && setUploadingFor(null)} />\r\n          <div className=\"absolute inset-0 flex items-center justify-center p-6\">\r\n            <div className=\"w-full max-w-md bg-slate-900 rounded-2xl border border-slate-700/50 shadow-2xl\">\r\n              <div className=\"p-6 border-b border-slate-700/50\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h2 className=\"text-xl font-bold text-white\">Upload Profile Picture</h2>\r\n                  <button \r\n                    onClick={() => !uploading && setUploadingFor(null)} \r\n                    disabled={uploading}\r\n                    className=\"w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:text-white disabled:opacity-50\"\r\n                  >\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n                  {/* Current Avatar */}\r\n                  <div className=\"flex items-center gap-4 w-full p-4 rounded-xl bg-slate-800/50\">\r\n                    {uploadingFor.avatar_url ? (\r\n                      <Image src={uploadingFor.avatar_url} alt={uploadingFor.full_name} width={64} height={64} className=\"w-16 h-16 rounded-xl object-cover\" />\r\n                    ) : (\r\n                      <div className={`w-16 h-16 rounded-xl bg-gradient-to-br ${getAvatarGradient(uploadingFor.full_name)} flex items-center justify-center text-white font-bold text-xl`}>\r\n                        {uploadingFor.avatar}\r\n                      </div>\r\n                    )}\r\n                    <div>\r\n                      <p className=\"text-lg font-medium text-white\">{uploadingFor.full_name}</p>\r\n                      <p className=\"text-sm text-slate-400\">{uploadingFor.role}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Upload Area */}\r\n                  <label className={`w-full p-8 rounded-xl border-2 border-dashed flex flex-col items-center gap-3 cursor-pointer transition-colors ${uploading ? 'border-slate-600 bg-slate-800/30' : 'border-slate-600 hover:border-cyan-500 hover:bg-cyan-500/5'}`}>\r\n                    {uploading ? (\r\n                      <>\r\n                        <div className=\"w-10 h-10 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin\" />\r\n                        <p className=\"text-sm text-slate-400\">Uploading...</p>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <svg className=\"w-10 h-10 text-slate-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                        </svg>\r\n                        <div className=\"text-center\">\r\n                          <p className=\"text-sm text-white\">Click to upload an image</p>\r\n                          <p className=\"text-xs text-slate-500 mt-1\">PNG, JPG, GIF up to 5MB</p>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                    <input \r\n                      type=\"file\" \r\n                      accept=\"image/*\" \r\n                      onChange={handleProfilePictureUpload} \r\n                      disabled={uploading}\r\n                      className=\"hidden\" \r\n                    />\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* User Management Modal */}\r\n      {showUserManagement && (\r\n        <div className=\"fixed inset-0 z-50 overflow-hidden\">\r\n          <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" onClick={() => setShowUserManagement(false)} />\r\n          <div className=\"absolute inset-0 flex items-center justify-center p-6\">\r\n            <div className=\"w-full max-w-2xl bg-slate-900 rounded-2xl border border-slate-700/50 shadow-2xl max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"p-6 border-b border-slate-700/50 sticky top-0 bg-slate-900\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h2 className=\"text-xl font-bold text-white\">Manage Users</h2>\r\n                  <button onClick={() => setShowUserManagement(false)} className=\"w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:text-white\">\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                {/* Password Management Info */}\r\n                <div className=\"mb-6 p-4 rounded-xl bg-amber-500/10 border border-amber-500/30\">\r\n                  <h3 className=\"text-sm font-semibold text-amber-400 mb-2\">üîê Password Management</h3>\r\n                  <p className=\"text-xs text-slate-300 mb-3\">\r\n                    To reset a team member&apos;s password, go to your Supabase Dashboard:\r\n                  </p>\r\n                  <a \r\n                    href=\"https://supabase.com/dashboard/project/csbliwkldlglbniqmdin/auth/users\" \r\n                    target=\"_blank\" \r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500/20 text-amber-400 text-sm hover:bg-amber-500/30 transition-colors\"\r\n                  >\r\n                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                    </svg>\r\n                    Open Supabase Auth Dashboard\r\n                  </a>\r\n                </div>\r\n\r\n                {/* Team Members List */}\r\n                <h3 className=\"text-sm font-semibold text-slate-300 mb-4\">Team Members ({profiles.length})</h3>\r\n                <div className=\"space-y-3\">\r\n                  {profiles.map(p => (\r\n                    <div key={p.id} className=\"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700/50\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        {p.avatar_url ? (\r\n                          <Image src={p.avatar_url} alt={p.full_name} width={40} height={40} className=\"w-10 h-10 rounded-lg object-cover\" />\r\n                        ) : (\r\n                          <div className={`w-10 h-10 rounded-lg bg-gradient-to-br ${getAvatarGradient(p.full_name)} flex items-center justify-center text-white font-bold text-sm`}>\r\n                            {p.avatar}\r\n                          </div>\r\n                        )}\r\n                        <div>\r\n                          <p className=\"text-sm font-medium text-white\">{p.full_name}</p>\r\n                          <p className=\"text-xs text-slate-500\">{p.email}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"px-2 py-1 rounded text-xs bg-slate-700 text-slate-300\">{p.role}</span>\r\n                        {p.is_admin && (\r\n                          <span className=\"px-2 py-1 rounded text-xs bg-rose-500/20 text-rose-400\">Admin</span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Add New User Info */}\r\n                <div className=\"mt-6 p-4 rounded-xl bg-slate-800/50 border border-slate-700/50\">\r\n                  <h3 className=\"text-sm font-semibold text-slate-300 mb-2\">‚ûï Add New Team Member</h3>\r\n                  <p className=\"text-xs text-slate-400 mb-3\">\r\n                    New team members can sign up at:\r\n                  </p>\r\n                  <code className=\"block p-2 rounded bg-slate-900 text-cyan-400 text-xs break-all\">\r\n                    https://kpi-tracker-six.vercel.app/login\r\n                  </code>\r\n                  <p className=\"text-xs text-slate-500 mt-2\">\r\n                    They click &quot;Sign up&quot; and create their account. Then you can update their role in Supabase if needed.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}